"use strict";var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e():t.circularProgress=e()}(window,function(){Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var r=Array.prototype.slice.call(arguments,1),a=this,t=function t(){return a.apply(this instanceof t?this:e,r.concat(Array.prototype.slice.call(arguments)))};return t.prototype=this.prototype,t},String.prototype.repeat||(String.prototype.repeat=function(t){if(null==this)throw new TypeError("can't convert "+this+" to object");var e=""+this;if((t=+t)!=t&&(t=0),t<0)throw new RangeError("repeat count must be non-negative");if(t==1/0)throw new RangeError("repeat count must be less than infinity");if(t=Math.floor(t),0==e.length||0==t)return"";if(e.length*t>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var r="";1==(1&t)&&(r+=e),0!=(t>>>=1);)e+=e;return r}),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},window.cancelAnimationFrame=window.cancelAnimationFrame||clearTimeout,document.createElement("canvas").getContext||(document.write('<script src="../dist/canvas-ployfill/html5.js"><\/script>'),document.write('<script src="../dist/canvas-ployfill/excanvas.js"><\/script>'));var r=function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{target:"circularProgress",animate:!0,style:{},steep:1};return this.div=document.getElementById(e.target),this.canvasWidth=e.width||parseInt(this.div.style.width),this.canvasHeight=e.height||parseInt(this.div.style.height),this.canvas=document.getElementById("cp-canvas-"+a(this.div,this.canvasWidth,this.canvasHeight)),this.canvas.getContext||G_vmlCanvasManager.initElement(this.canvas),this.ctx=this.canvas.getContext("2d"),this.baseStyle=t.styles.default,this.style=e.style||{},this.steep=e.steep||1,this.value=0,this.animate=e.animate,this.targetValue=0,this.formatText=e.formatText||function(t){return parseFloat(t+"").toFixed(0)+"%"},this},a=function(t,e,r){for(var a=o();document.getElementById("cp-canvas-"+a);)a=o();return t.innerHTML='<canvas id="cp-canvas-'+a+'" width="'+e+'" height="'+r+'"></canvas>',a};r.styles={default:{background:{backgroundColor:"#000",alpha:0,backgroundImage:"",crossOrigin:!1},ring:{backgroundColor:"#cccccc",radius:0,alpha:.7,lineWidth:2,fill:""},progress:{color:"#FF8C00",radius:0,alpha:1,lineWidth:4},text:{font:"20px sans-serif",color:"#000000",alpha:1}},"blue-light":{background:{backgroundColor:"#092a34",alpha:1,backgroundImage:"",crossOrigin:!1},ring:{backgroundColor:"#cccccc",radius:0,alpha:.1,lineWidth:1,fill:""},progress:{color:"#38b396",radius:0,alpha:1,lineWidth:2},endPoint:{color:"#fff",radius:"1"},text:{font:"20px sans-serif",color:"#fff",alpha:1}},grad:{background:{backgroundColor:"#fff",alpha:0,backgroundImage:"",crossOrigin:!1},ring:{backgroundColor:"#cccccc",radius:0,alpha:.1,lineWidth:1,fill:""},progress:{color:"#38b396",radius:0,alpha:1,lineWidth:2,grad:!0,gradColor:["red","blue","red"]},text:{font:"20px sans-serif",color:"#000",alpha:1,grad:!0,gradColor:["orange","yellow","green","blue","indigo","violet","red"]}}},r.prototype.setBaseStyle=function(t,e){return e&&(r.styles[t]=e),this.baseStyle=r.styles[t],this},r.prototype.draw=function(t){this.targetValue=t;var e=this.style,r=this.ctx,a=this.canvasWidth,n=this.canvasHeight,i=this.formatText,o=this.baseStyle;if(this.animate){this.value+=this.steep;var s=this.value;this.targetValue>=this.value?(this.clear(),l(r,_extends({},o.background,e.background),a,n,function(){c(r,a,n,_extends({},o.ring,e.ring)),void 0!==s&&(u(r,i(s),_extends({},o.text,e.text),a,n),h(r,+parseFloat(s).toFixed(0),_extends({},o.progress,e.progress),a,n))})):this.value=this.targetValue,this.animateNumber=requestAnimationFrame(this.draw.bind(this,t))}else this.clear(),l(r,_extends({},o.background,e.background),a,n,function(){c(r,a,n,_extends({},o.ring,e.ring)),void 0!==t&&(u(r,i(t),_extends({},o.text,e.text),a,n),h(r,+parseFloat(t).toFixed(0),_extends({},o.progress,e.progress),a,n))});return this},r.prototype.clear=function(){return this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this};var l=function(a,n,i,o,s){if(a.save(),a.beginPath(),n.backgroundImage){var l=new Image;l.src=n.backgroundImage,n.crossOrigin&&(l.crossOrigin="Anonymous"),l.onload=function(){a.drawImage(l,0,0,i,o);for(var t=a.getImageData(0,0,l.width,l.height),e=0,r=t.data.length;e<r;e+=4)t.data[e+3]=t.data[e+3]*n.alpha;a.putImageData(t,0,0),s&&s()}}else a.fillStyle=d(n.backgroundColor||"#000",n.alpha),a.rect(0,0,i,o),a.fill(),s&&s()},c=function(t,e,r,a){var n=0;n=0!==a.radius?a.radius:r<e?.9*r*.5:.9*e*.5,t.save(),t.beginPath(),t.fillStyle=d(a.fill,a.alpha),t.arc(e/2,r/2,n-a.lineWidth,0,2*Math.PI,!1),t.fill(),t.strokeStyle=d(a.backgroundColor,a.alpha),t.lineWidth=a.lineWidth,t.stroke(),t.restore()},u=function(t,e,r,a,n){t.save(),t.font=r.font,t.textAlign="start";var i=t.measureText(e);if(r.grad){for(var o=t.createLinearGradient(0,0,a,0),s=1/r.gradColor.length,l=0;l<r.gradColor.length;l++)o.addColorStop(l*s,r.gradColor[l]);t.strokeStyle=o,t.strokeText(e,a/2-i.width/2,n/2+7)}else t.fillStyle=d(r.color,r.alpha),t.fillText(e,a/2-i.width/2,n/2+7);t.restore()},h=function(t,e,r,a,n){var i=2*Math.PI/100,o=n<a?.9*n*.5:.9*a*.5;if(t.save(),t.beginPath(),r.grad){for(var s=t.createLinearGradient(0,0,a,0),l=0;l<r.gradColor.length;l++)s.addColorStop(.5*l,r.gradColor[l]);t.strokeStyle=s}else t.strokeStyle=d(r.color,r.alpha);t.lineWidth=r.lineWidth,t.arc(a/2,n/2,o-r.lineWidth/2,-Math.PI/2,-Math.PI/2+i*e,!1),t.stroke(),t.restore()},n=void 0,i=!(r.prototype.setValue=function(t){return t<this.value&&(this.value=0),this.animateNumber&&cancelAnimationFrame(this.animateNumber),this.draw(t),this});function d(t,e){return 0===t.indexOf("rgba(")?t:(4===t.length&&(t="#"+t.slice(1).repeat(2)),"rgba("+parseInt("0x"+t.slice(1,3))+","+parseInt("0x"+t.slice(3,5))+","+parseInt("0x"+t.slice(5,7))+","+e+")")}r.attach=function(e){e.fn.hasOwnProperty("circularProgress")?n=e.fn.circularProgress:i=!0,e.fn.extend({circularProgress:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t.target=e(this).attr("id"),new r(t)}})},r.deviate=function(t){i?delete t.fn.circularProgress:t.fn.extend({circularProgress:n}),i=!1};try{$?r.attach($):jquery?r.attach(jquery):JQuery?r.attach(JQuery):console.warn("未找到jquery对象， 请手动执行circularProgress.attach 方法进行jquery扩展")}catch(t){console.warn("未找到jquery对象， 请手动执行circularProgress.attach 方法进行jquery扩展")}var o=function(){return(new Date).getTime().toString(16)};return r});