"use strict";var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e():t.circularProgress=e()}(window,function(){Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var a=Array.prototype.slice.call(arguments,1),i=this,t=function t(){return console.log("21:53",t,this,this instanceof t),i.apply(this instanceof t?this:e,a.concat(Array.prototype.slice.call(arguments)))};return t.prototype=this.prototype,t},window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},window.cancelAnimationFrame=window.cancelAnimationFrame||clearTimeout,document.createElement("canvas").getContext||(document.write('<script src="../dist/canvas-ployfill/html5.js"><\/script>'),document.write('<script src="../dist/canvas-ployfill/excanvas.js"><\/script>'));var o=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{target:"circularProgress",animate:!0,style:{},steep:1};return this.div=document.getElementById(t.target),this.canvasWidth=t.width||parseInt(this.div.style.width),this.canvasHeight=t.height||parseInt(this.div.style.height),this.canvas=document.getElementById("cp-canvas-"+e(this.div,this.canvasWidth,this.canvasHeight)),this.canvas.getContext||G_vmlCanvasManager.initElement(this.canvas),this.ctx=this.canvas.getContext("2d"),this.style=t.style||{},this.steep=t.steep||1,this.value=0,this.animate=t.animate,this.targetValue=0,this.formatText=t.formatText||function(t){return parseFloat(t+"").toFixed(0)+"%"},this},e=function(t,e,a){var i=n();return t.innerHTML='<canvas id="cp-canvas-'+i+'" width="'+e+'" height="'+a+'"></canvas>',i};o.styles={default:{background:{backgroundColor:"#000",alpha:1,backgroundImage:"",crossOrigin:!1},ring:{backgroundColor:"#cccccc",radius:0,alpha:.7,lineWidth:2,fill:""},progress:{color:"#FF8C00",radius:0,alpha:1,lineWidth:4},text:{font:"20px sans-serif",color:"#000000",alpha:1}}},o.prototype.draw=function(t){this.targetValue=t;var e=this.style,a=this.ctx,i=this.canvasWidth,n=this.canvasHeight,r=this.formatText;if(this.animate){this.value+=this.steep;var s=this.value;this.targetValue>=this.value?(this.clear(),c(a,_extends({},o.styles.default.background,e.background),i,n,function(){l(a,i,n,_extends({},o.styles.default.ring,e.ring)),void 0!==s&&(u(a,r(s),_extends({},o.styles.default.text,e.text),i,n),h(a,+parseFloat(s).toFixed(0),_extends({},o.styles.default.progress,e.progress),i,n))})):this.value=this.targetValue,this.animateNumber=requestAnimationFrame(this.draw.bind(this,t))}else this.clear(),c(a,_extends({},o.styles.default.background,e.background),i,n,function(){l(a,i,n,_extends({},o.styles.default.ring,e.ring)),void 0!==t&&(u(a,r(t),_extends({},o.styles.default.text,e.text),i,n),h(a,+parseFloat(t).toFixed(0),_extends({},o.styles.default.progress,e.progress),i,n))});return this},o.prototype.clear=function(){return this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight),this};var c=function(i,n,r,s,o){if(i.save(),i.beginPath(),n.backgroundImage){var c=new Image;c.src=n.backgroundImage,n.crossOrigin&&(c.crossOrigin="Anonymous"),c.onload=function(){i.drawImage(c,0,0,r,s);for(var t=i.getImageData(0,0,c.width,c.height),e=0,a=t.data.length;e<a;e+=4)t.data[e+3]=t.data[e+3]*n.alpha;i.putImageData(t,0,0),o&&o()}}else i.fillStyle=n.backgroundColor||"#000",i.rect(0,0,r,s),i.fill(),o&&o()},l=function(t,e,a,i){var n=0;n=0!==i.radius?i.radius:a<e?.9*a*.5:.9*e*.5,t.save(),t.beginPath(),t.fillStyle=d(i.fill,i.alpha),t.arc(e/2,a/2,n-i.lineWidth,0,2*Math.PI,!1),t.fill(),t.strokeStyle=d(i.backgroundColor,i.alpha),t.lineWidth=i.lineWidth,t.stroke(),t.restore()},u=function(t,e,a,i,n){t.save(),t.font=a.font,t.textAlign="start";var r=t.measureText(e);t.fillStyle=d(a.color,a.alpha),t.fillText(e,i/2-r.width/2,n/2+7),t.restore()},h=function(t,e,a,i,n){var r=2*Math.PI/100,s=n<i?.9*n*.5:.9*i*.5;t.save(),t.beginPath(),t.strokeStyle=d(a.color,a.alpha),t.lineWidth=a.lineWidth,t.arc(i/2,n/2,s-a.lineWidth/2,-Math.PI/2,-Math.PI/2+r*e,!1),t.stroke(),t.restore()},a=void 0,i=!(o.prototype.setValue=function(t){return t<this.value&&(this.value=0),this.animateNumber&&cancelAnimationFrame(this.animateNumber),this.draw(t),this});function d(t,e){return 0===t.indexOf("rgba(")?t:"rgba("+parseInt("0x"+t.slice(1,3))+","+parseInt("0x"+t.slice(3,5))+","+parseInt("0x"+t.slice(5,7))+","+e+")"}o.attach=function(e){e.fn.hasOwnProperty("circularProgress")?a=e.fn.circularProgress:i=!0,e.fn.extend({circularProgress:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t.target=e(this).attr("id"),new o(t)}})},o.deviate=function(t){i?delete t.fn.circularProgress:t.fn.extend({circularProgress:a}),i=!1};try{$?o.attach($):jquery?o.attach(jquery):JQuery?o.attach(JQuery):console.warn("未找到jquery对象， 请手动执行circularProgress.attach 方法进行jquery扩展")}catch(t){console.warn("未找到jquery对象， 请手动执行circularProgress.attach 方法进行jquery扩展")}var n=function(){return(new Date).getTime().toString(16)};return o});